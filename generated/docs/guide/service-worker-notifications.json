{
  "id": "guide/service-worker-notifications",
  "title": "Service worker notifications",
  "contents": "\n\n\n\n\n<div class=\"content\">\n  <h1 id=\"service-worker-notifications\">Service worker notifications<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#service-worker-notifications\"><i class=\"material-icons\">link</i></a></h1>\n<p>Push notifications are a compelling way to engage users.\nThrough the power of service workers, notifications can be delivered to a device even when your application is not in focus.</p>\n<p>The Angular service worker enables the display of push notifications and the handling of notification click events.</p>\n<div class=\"alert is-helpful\">\n<p>When using the Angular service worker, push notification interactions are handled using the <code><a href=\"api/service-worker/SwPush\" class=\"code-anchor\">SwPush</a></code> service.\nTo learn more about the browser APIs involved see <a href=\"https://developer.mozilla.org/docs/Web/API/Push_API\">Push API</a> and <a href=\"https://developer.mozilla.org/docs/Web/API/Notifications_API/Using_the_Notifications_API\">Using the Notifications API</a>.</p>\n</div>\n<h2 id=\"prerequisites\">Prerequisites<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#prerequisites\"><i class=\"material-icons\">link</i></a></h2>\n<p>We recommend you have a basic understanding of the following:</p>\n<ul>\n<li><a href=\"guide/service-worker-getting-started\">Getting Started with Service Workers</a></li>\n</ul>\n<h2 id=\"notification-payload\">Notification payload<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#notification-payload\"><i class=\"material-icons\">link</i></a></h2>\n<p>Invoke push notifications by pushing a message with a valid payload.\nSee <code><a href=\"api/service-worker/SwPush\" class=\"code-anchor\">SwPush</a></code> for guidance.</p>\n<div class=\"alert is-helpful\">\n<p>In Chrome, you can test push notifications without a backend.\nOpen Devtools -> Application -> Service Workers and use the <code>Push</code> input to send a JSON notification payload.</p>\n</div>\n<h2 id=\"notification-click-handling\">Notification click handling<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#notification-click-handling\"><i class=\"material-icons\">link</i></a></h2>\n<p>The default behavior for the <code>notificationclick</code> event is to close the notification and notify <code><a href=\"api/service-worker/SwPush#notificationClicks\" class=\"code-anchor\">SwPush.notificationClicks</a></code>.</p>\n<p>You can specify an additional operation to be executed on <code>notificationclick</code> by adding an <code>onActionClick</code> property to the <code>data</code> object, and providing a <code>default</code> entry.\nThis is especially useful for when there are no open clients when a notification is clicked.</p>\n<code-example format=\"json\" language=\"json\">\n\n{\n  \"notification\": {\n    \"title\": \"New Notification!\",\n    \"data\": {\n      \"onActionClick\": {\n        \"default\": {\"operation\": \"openWindow\", \"url\": \"foo\"}\n      }\n    }\n  }\n}\n\n</code-example>\n<h3 id=\"operations\">Operations<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#operations\"><i class=\"material-icons\">link</i></a></h3>\n<p>The Angular service worker supports the following operations:</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Operations</th>\n<th align=\"left\">Details</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\"><code>openWindow</code></td>\n<td align=\"left\">Opens a new tab at the specified URL.</td>\n</tr>\n<tr>\n<td align=\"left\"><code>focusLastFocusedOrOpen</code></td>\n<td align=\"left\">Focuses the last focused client. If there is no client open, then it opens a new tab at the specified URL.</td>\n</tr>\n<tr>\n<td align=\"left\"><code>navigateLastFocusedOrOpen</code></td>\n<td align=\"left\">Focuses the last focused client and navigates it to the specified URL. If there is no client open, then it opens a new tab at the specified URL.</td>\n</tr>\n<tr>\n<td align=\"left\"><code>sendRequest</code></td>\n<td align=\"left\">Send a simple GET request to the specified URL.</td>\n</tr>\n</tbody>\n</table>\n<div class=\"alert is-important\">\n<p>URLs are resolved relative to the service worker's registration scope.<br>\nIf an <code>onActionClick</code> item does not define a <code>url</code>, then the service worker's registration scope is used.</p>\n</div>\n<h3 id=\"actions\">Actions<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#actions\"><i class=\"material-icons\">link</i></a></h3>\n<p>Actions offer a way to customize how the user can interact with a notification.</p>\n<p>Using the <code>actions</code> property, you can define a set of available actions.\nEach action is represented as an action button that the user can click to interact with the notification.</p>\n<p>In addition, using the <code>onActionClick</code> property on the <code>data</code> object, you can tie each action to an operation to be performed when the corresponding action button is clicked:</p>\n<code-example format=\"typescript\" language=\"typescript\">\n\n{\n  \"notification\": {\n    \"title\": \"New Notification!\",\n    \"actions\": [\n      {\"action\": \"foo\", \"title\": \"Open new tab\"},\n      {\"action\": \"bar\", \"title\": \"Focus last\"},\n      {\"action\": \"baz\", \"title\": \"Navigate last\"},\n      {\"action\": \"qux\", \"title\": \"Send request in the background\"},\n      {\"action\": \"other\", \"title\": \"Just notify existing clients\"}\n    ],\n    \"data\": {\n      \"onActionClick\": {\n        \"default\": {\"operation\": \"openWindow\"},\n        \"foo\": {\"operation\": \"openWindow\", \"url\": \"/absolute/path\"},\n        \"bar\": {\"operation\": \"focusLastFocusedOrOpen\", \"url\": \"relative/path\"},\n        \"baz\": {\"operation\": \"navigateLastFocusedOrOpen\", \"url\": \"https://other.domain.com/\"},\n        \"qux\": {\"operation\": \"sendRequest\", \"url\": \"https://yet.another.domain.com/\"}\n      }\n    }\n  }\n}\n\n</code-example>\n<div class=\"alert is-important\">\n<p>If an action does not have a corresponding <code>onActionClick</code> entry, then the notification is closed and <code><a href=\"api/service-worker/SwPush#notificationClicks\" class=\"code-anchor\">SwPush.notificationClicks</a></code> is notified on existing clients.</p>\n</div>\n<h2 id=\"more-on-angular-service-workers\">More on Angular service workers<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/service-worker-notifications#more-on-angular-service-workers\"><i class=\"material-icons\">link</i></a></h2>\n<p>You might also be interested in the following:</p>\n<ul>\n<li><a href=\"guide/service-worker-devops\">Service Worker in Production</a></li>\n</ul>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">Last reviewed on Mon Feb 28 2022</div>\n</div>\n\n<!-- links to this doc:\n - api/service-worker/SwPush\n - guide/service-worker-communications\n - guide/service-worker-intro\n-->\n<!-- links from this doc:\n - api/service-worker/SwPush\n - api/service-worker/SwPush#notificationClicks\n - guide/service-worker-devops\n - guide/service-worker-getting-started\n - guide/service-worker-notifications#actions\n - guide/service-worker-notifications#more-on-angular-service-workers\n - guide/service-worker-notifications#notification-click-handling\n - guide/service-worker-notifications#notification-payload\n - guide/service-worker-notifications#operations\n - guide/service-worker-notifications#prerequisites\n - guide/service-worker-notifications#service-worker-notifications\n - https://developer.mozilla.org/docs/Web/API/Notifications_API/Using_the_Notifications_API\n - https://developer.mozilla.org/docs/Web/API/Push_API\n-->"
}