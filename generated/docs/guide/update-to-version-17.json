{
  "id": "guide/update-to-version-17",
  "title": "Update Angular to v17",
  "contents": "\n\n\n\n\n<div class=\"content\">\n  <h1 id=\"update-angular-to-v17\">Update Angular to v17<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#update-angular-to-v17\"><i class=\"material-icons\">link</i></a></h1>\n<!-- NOTE to writers: When creating the topic for the next version,                               -->\n<!--   remember to update the redirect link in angular/aio/firebase.json                          -->\n<!-- To update the redirect link in angular/aio/firebase.json:                                    -->\n<!--   1. Search for the entry in firebase.json with \"source\": \"guide/update-to-latest-version\"   -->\n<!--   2,  Update the destination value to refer to the new guide's URL                           -->\n<!--                                                                                              -->\n<p>This topic provides information about updating your Angular applications to Angular version 17.</p>\n<p>For a summary of this information and the step-by-step procedure to update your Angular application\nto v17, see the <a href=\"https://update.angular.io\">Angular Update Guide</a>.</p>\n<p>The information in the <a href=\"https://update.angular.io\">Angular Update Guide</a> and this topic is\nsummarized from these changelogs:</p>\n<ul>\n<li><a href=\"https://github.com/angular/angular/blob/main/CHANGELOG.md\">angular/angular changelog</a></li>\n<li><a href=\"https://github.com/angular/angular-cli/blob/main/CHANGELOG.md\">angular/angular-cli changelog</a></li>\n<li><a href=\"https://github.com/angular/components/blob/main/CHANGELOG.md\">angular/components changelog</a></li>\n</ul>\n<p>Information about updating Angular applications to v16 is archived at\n<a href=\"/guide/update-to-version-16\">Update to version 16</a>.</p>\n<p><a id=\"new-features\"></a></p>\n<h2 id=\"feature-highlights-in-angular-v17\">Feature highlights in Angular v17<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#feature-highlights-in-angular-v17\"><i class=\"material-icons\">link</i></a></h2>\n<p>For a more comprehensive list of new features, see the\n<a href=\"https://blog.angular.io\">Angular blog post on the update to v17</a>.</p>\n<!-- markdownLint-disable MD001 -->\n<h4 id=\"deferrable-views\">Deferrable views<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#deferrable-views\"><i class=\"material-icons\">link</i></a></h4>\n<p>The new deferrable views allow you to lazily load all the components, directives, and pipes in a a section of your template:</p>\n<code-example language=\"html\">\n@defer (on viewport) {\n  &#x3C;comment-list />\n} @placeholder {\n  &#x3C;!-- A placeholder content to show until the comments load -->\n  &#x3C;<a href=\"api/common/NgOptimizedImage\" class=\"code-anchor\">img</a> src=\"comments-placeholder.png\" />\n}\n</code-example>\n<p>In the example above, Angular first renders the contents of the placeholder block. When it becomes visible in the viewport, the loading of the <code>&#x3C;comment-list /></code> component starts. Once the loading is completed, Angular removes the placeholder and renders the component.</p>\n<h4 id=\"built-in-control-flow\">Built-in control flow<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#built-in-control-flow\"><i class=\"material-icons\">link</i></a></h4>\n<p>We used a new block syntax for an optimized, built-in control flow. After running user studies we identified that a lot of developers struggle with <code>*<a href=\"api/common/NgIf\" class=\"code-anchor\">ngIf</a></code>, <code>*<a href=\"api/common/NgSwitch\" class=\"code-anchor\">ngSwitch</a></code>, and <code>*<a href=\"api/common/NgFor\" class=\"code-anchor\">ngFor</a></code>.</p>\n<p>It includes conditional statements:</p>\n<code-example language=\"text\">\n@if (loggedIn) {\n  The user is logged in\n} @else {\n  The user is not logged in\n}\n</code-example>\n<p>Switch statements:</p>\n<code-example language=\"text\">\n@switch (accessLevel) {\n  @case ('admin') { &#x3C;admin-dashboard/> }\n  @case ('moderator') { &#x3C;moderator-dashboard/> }\n  @default { &#x3C;user-dashboard/> }\n}\n</code-example>\n<p>And for loop:</p>\n<code-example language=\"text\">\n@for (user of users; track user.id) {\n  {{ user.name }}\n} @empty {\n  Empty list of users\n}\n</code-example>\n<p>In addition to the improved ergonomics, the control flow is also up to 90% faster for certain performance benchmarks.</p>\n<p>As of v17, the built-in control flow is in developer preview. To update your projects to using it run the schematic:</p>\n<code-example language=\"sh\">\nng generate @angular/core:control-flow\n</code-example>\n<h4 id=\"new-angularssr-package\">New <code>@angular/ssr</code> package<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#new-angularssr-package\"><i class=\"material-icons\">link</i></a></h4>\n<p>We moved the code powering Angular server-side rendering from <code>angular/universal</code> to <code>angular/angular-cli</code>, integrating SSR more directly into our tooling.</p>\n<p>Starting today, to add SSR support to your existing application run:</p>\n<code-example language=\"sh\">\nng add @angular/ssr\n</code-example>\n<p>This command generates the server entry point, adds SSR and SSG build capabilities, and enables hydration by default. <code>@angular/ssr</code> provides equivalent functionality to<code> @nguniversal/express-engine</code> which is currently in maintenance mode. The Angular CLI will automatically update your code to <code>@angular/ssr</code> with <code>ng update</code>!</p>\n<h4 id=\"new-lifecycle-hooks\">New lifecycle hooks<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#new-lifecycle-hooks\"><i class=\"material-icons\">link</i></a></h4>\n<p>To improve the performance of Angular’s SSR and SSG, in the long-term we’d like to move away from DOM emulation and direct DOM manipulations. At the same time, throughout most applications’ lifecycle they need to interact with elements to instantiate third-party libraries, measure element size, etc.</p>\n<p>To enable this, we developed a set of new lifecycle hooks:</p>\n<ul>\n<li><code><a href=\"api/core/afterRender\" class=\"code-anchor\">afterRender</a></code> - register a callback to be invoked each time the application finishes rendering</li>\n<li><code><a href=\"api/core/afterNextRender\" class=\"code-anchor\">afterNextRender</a></code> - register a callback to be invoked the next time the application finishes rendering</li>\n</ul>\n<p>Only the browser will invoke these hooks, which enables you to plug custom DOM logic safely directly inside your components. For example, if you’d like to instantiate a charting library you can use afterNextRender:</p>\n<code-example language=\"typescript\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  selector: 'my-chart-cmp',\n  template: `&#x3C;div #chart>{{ ... }}&#x3C;/div>`,\n})\nexport class MyChartCmp {\n  @<a href=\"api/core/ViewChild\" class=\"code-anchor\">ViewChild</a>('chart') chartRef: <a href=\"api/core/ElementRef\" class=\"code-anchor\">ElementRef</a>;\n  chart: MyChart | null;\n\n  constructor() {\n    <a href=\"api/core/afterNextRender\" class=\"code-anchor\">afterNextRender</a>(() => {\n      this.chart = new MyChart(this.chartRef.nativeElement);\n    });\n  }\n}\n</code-example>\n<h4 id=\"vite-and-esbuild-the-default-for-new-projects\">Vite and esbuild the default for new projects<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#vite-and-esbuild-the-default-for-new-projects\"><i class=\"material-icons\">link</i></a></h4>\n<p>In v16 we introduced developer preview of the esbuild plus Vite powered build experience. Since then a lot of developers experimented with it and enterprises! Today, we’re happy to announce that the new application builder graduates from developer preview and is enabled by default for all new applications!</p>\n<p>We updated the build pipeline when using hybrid rendering. With SSR &#x26; SSG you can observe up to 87% speed improvement in ng build and 80% faster edit-refresh loop in for <code>ng serve</code>. We'll be working on schematics to switch existing applications using hybrid rendering (SSR and SSG) to the new builder.</p>\n<h4 id=\"dependency-injection-debugging-in-devtools\">Dependency injection debugging in DevTools<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#dependency-injection-debugging-in-devtools\"><i class=\"material-icons\">link</i></a></h4>\n<p>Over the past few months, we implemented brand new debugging APIs that allow us to plug into the framework’s runtime and inspect the injector tree.</p>\n<p>Based on these APIs we built an inspection user interface that allows you to preview the:</p>\n<ul>\n<li>Dependencies of your components in the component inspector</li>\n<li>Injector tree and dependency resolution path</li>\n<li>Providers declared within the individual injectors</li>\n</ul>\n<h4 id=\"experimental-view-transitions-support\">Experimental view transitions support<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#experimental-view-transitions-support\"><i class=\"material-icons\">link</i></a></h4>\n<p>The View Transitions API enables smooth transitions when changing the DOM. In the Angular router we now provide direct support for this API via the <code><a href=\"api/router/withViewTransitions\" class=\"code-anchor\">withViewTransitions</a></code> feature. Using this, you can use the browser's native capabilities for creating animated transitions between routes.</p>\n<p>You can add this feature to your app today by configuring it in the router’s provider declaration during bootstrap:</p>\n<code-example language=\"typescript\">\n<a href=\"api/platform-browser/bootstrapApplication\" class=\"code-anchor\">bootstrapApplication</a>(App, {\n  providers: [<a href=\"api/router/provideRouter\" class=\"code-anchor\">provideRouter</a>(routes, <a href=\"api/router/withViewTransitions\" class=\"code-anchor\">withViewTransitions</a>())],\n});\n</code-example>\n<p><code><a href=\"api/router/withViewTransitions\" class=\"code-anchor\">withViewTransitions</a></code> accepts an optional configuration object with property <code>onViewTransitionCreated</code>, which is a callback that provides you some extra control:</p>\n<ul>\n<li>Decide if you’d like to skip particular animations</li>\n<li>Add classes to the document to customize the animation and remove these classes when the animation completes</li>\n<li>etc.</li>\n</ul>\n<p><a id=\"breaking-changes\"></a></p>\n<h2 id=\"highlighted-breaking-changes-in-angular-v17\">Highlighted breaking changes in Angular v17<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#highlighted-breaking-changes-in-angular-v17\"><i class=\"material-icons\">link</i></a></h2>\n<p>For a comprehensive list of breaking changes, see the full changelogs on GitHub.</p>\n<p><a id=\"v17-bc-01\"></a></p>\n<h3 id=\"angular-v17-requires-nodejs-version-v1813-or-newer\">Angular v17 requires node.js version v18.13 or newer<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#angular-v17-requires-nodejs-version-v1813-or-newer\"><i class=\"material-icons\">link</i></a></h3>\n<p>Angular requires node.js v18.13 or newer.</p>\n<p>See <a href=\"/guide/versions\">Version compatibility</a> for full version compatibility details.</p>\n<p><a id=\"v17-bc-02\"></a></p>\n<h3 id=\"angular-v17-requires-typescript-version-52-or-later\">Angular v17 requires TypeScript version 5.2 or later<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#angular-v17-requires-typescript-version-52-or-later\"><i class=\"material-icons\">link</i></a></h3>\n<p>Angular v17 no longer supports TypeScript versions older than 5.2.</p>\n<p>See <a href=\"/guide/versions\">Version compatibility</a> for full version compatibility details.</p>\n<p><a id=\"v17-bc-03\"></a></p>\n<h3 id=\"angular-v17-requires-zonejs-v0140\">Angular v17 requires zone.js v0.14.0<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#angular-v17-requires-zonejs-v0140\"><i class=\"material-icons\">link</i></a></h3>\n<p>Angular v17 no longer supports zone.js older than v0.14.0.</p>\n<p><a id=\"v17-bc-04\"></a></p>\n<h4 id=\"strict-ngswitch-check\">Strict NgSwitch check<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#strict-ngswitch-check\"><i class=\"material-icons\">link</i></a></h4>\n<p>The <code><a href=\"api/common/NgSwitch\" class=\"code-anchor\">NgSwitch</a></code> directive now defaults to the <code>===</code> equality operator, migrating from the previously used <code>==</code>. <code><a href=\"api/common/NgSwitch\" class=\"code-anchor\">NgSwitch</a></code> expressions or individual condition values need adjusting to this stricter equality check. You'll see a warning message in the console where you need to adjust the check.</p>\n<p><a id=\"v17-bc-06\"></a></p>\n<h4 id=\"routes-with-loadcomponent-data-inheritance\">Routes with <code>loadComponent</code> data inheritance<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#routes-with-loadcomponent-data-inheritance\"><i class=\"material-icons\">link</i></a></h4>\n<p>Child routes with <code>loadComponent</code> no longer automatically inherit their data from their parent by default. In v17 the default <code>paramsInheritanceStrategy</code> is <code>emptyOnly</code>. If you want to inherit parent data in child routes update the strategy to <code>always</code>.</p>\n<p><a id=\"v17-bc-07\"></a></p>\n<h4 id=\"router-absolute-redirect-behavior-change\">Router absolute redirect behavior change<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#router-absolute-redirect-behavior-change\"><i class=\"material-icons\">link</i></a></h4>\n<p>Absolute redirects no longer prevent further redirects. You may need to adjust route configurations to prevent infinite redirects. Previously the router was ignoring all redirects after an absolute redirect.</p>\n<p><a id=\"v17-bc-08\"></a></p>\n<h4 id=\"removal-of-setuptestingrouter\">Removal of <code>setupTestingRouter</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#removal-of-setuptestingrouter\"><i class=\"material-icons\">link</i></a></h4>\n<p>Use <code>RouterModule.forRoot</code> or <code><a href=\"api/router/provideRouter\" class=\"code-anchor\">provideRouter</a></code> to setup the Router for tests instead of <code>setupTestingRouter</code>.</p>\n<p><a id=\"v17-bc-09\"></a></p>\n<h4 id=\"removal-of-malformedurierrorhandler\">Removal of <code>malformedUriErrorHandler</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#removal-of-malformedurierrorhandler\"><i class=\"material-icons\">link</i></a></h4>\n<p>We removed <code>malformedUriErrorHandler</code> from the <code>RouterModule.forRoot</code> options. To handle URL parsing errors use the <code>UrlSerializer.parse</code> method.</p>\n<p><a id=\"v17-bc-10\"></a></p>\n<h4 id=\"removal-of-zonejs-bundles\">Removal of zone.js bundles<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#removal-of-zonejs-bundles\"><i class=\"material-icons\">link</i></a></h4>\n<p>In v17 we removed <code>zone-testing-bundle</code> and <code>zone-testing-node-bundle</code> which now prevents you from using <code>dist/</code> imports like <code>zone.js/bundles/zone-testing.js</code> and <code>zone.js/dist/zone</code>.</p>\n<p><a id=\"v17-bc-11\"></a></p>\n<h4 id=\"onpush-dynamically-instantiated-components\"><code>OnPush</code> dynamically instantiated components<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#onpush-dynamically-instantiated-components\"><i class=\"material-icons\">link</i></a></h4>\n<p>For dynamically instantiated components we now execute <code>ngDoCheck</code> during change detection if the component is marked as dirty. You may need to update your tests or logic within <code>ngDoCheck</code> for dynamically instantiated components.</p>\n<p><a id=\"v17-bc-12\"></a></p>\n<h4 id=\"relocating-router-public-methods-to-providerouter-and-routermoduleforroot\">Relocating Router public methods to <code><a href=\"api/router/provideRouter\" class=\"code-anchor\">provideRouter</a></code> and <code>RouterModule.forRoot</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#relocating-router-public-methods-to-providerouter-and-routermoduleforroot\"><i class=\"material-icons\">link</i></a></h4>\n<p>Make sure you configure <code>setupTestingRouter</code>, <code>canceledNavigationResolution</code>, <code>paramsInheritanceStrategy</code>, <code>titleStrategy</code>, <code>urlUpdateStrategy</code>, <code>urlHandlingStrategy</code>, and <code>malformedUriErrorHandler</code> in <code><a href=\"api/router/provideRouter\" class=\"code-anchor\">provideRouter</a></code> or <code>RouterModule.forRoot</code> since these properties are now not part of the <code><a href=\"api/router/Router\" class=\"code-anchor\">Router</a></code>'s public API</p>\n<p><a id=\"v17-bc-13\"></a></p>\n<h4 id=\"remove_styles_on_component_destroy-now-defaults-to-true\"><code><a href=\"api/platform-browser/REMOVE_STYLES_ON_COMPONENT_DESTROY\" class=\"code-anchor\">REMOVE_STYLES_ON_COMPONENT_DESTROY</a></code> now defaults to <code>true</code><a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#remove_styles_on_component_destroy-now-defaults-to-true\"><i class=\"material-icons\">link</i></a></h4>\n<p>Angular now automatically removes styles of destroyed components, which may impact your existing apps in cases you rely on leaked styles. To change this update the value of the <code><a href=\"api/platform-browser/REMOVE_STYLES_ON_COMPONENT_DESTROY\" class=\"code-anchor\">REMOVE_STYLES_ON_COMPONENT_DESTROY</a></code> provider to <code>false</code>.</p>\n<p><a id=\"deprecations\"></a></p>\n<h2 id=\"deprecations-highlights-in-angular-v17\">Deprecations highlights in Angular v17<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/update-to-version-17#deprecations-highlights-in-angular-v17\"><i class=\"material-icons\">link</i></a></h2>\n<p>These APIs remain available in v17, but may be removed in future versions as described by Angular's\n<a href=\"/guide/releases#deprecation-policy\">deprecation policy</a>.</p>\n<p>To maintain the reliability of your Angular application, always update your application as soon as\npracticable.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Removed</th>\n<th align=\"left\">Replacement</th>\n<th align=\"left\">Details</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\"><a id=\"v17-dp-01\"></a><code><a href=\"api/core/NgProbeToken\" class=\"code-anchor\">NgProbeToken</a></code></td>\n<td align=\"left\">None</td>\n<td align=\"left\">The <code><a href=\"api/core/NgProbeToken\" class=\"code-anchor\">NgProbeToken</a></code> is not used internally since the transition from View Engine to Ivy. The token has no utility and can be removed from applications and libraries.</td>\n</tr>\n<tr>\n<td align=\"left\"><a id=\"v17-dp-02\"></a><code><a href=\"api/animations/browser/AnimationDriver#NOOP\" class=\"code-anchor\">AnimationDriver.NOOP</a></code></td>\n<td align=\"left\"><code><a href=\"api/animations/browser/NoopAnimationDriver\" class=\"code-anchor\">NoopAnimationDriver</a></code></td>\n<td align=\"left\"><code>The <a href=\"api/animations/browser/AnimationDriver#NOOP\" class=\"code-anchor\">AnimationDriver.NOOP</a></code> symbol is deprecated, use <code><a href=\"api/animations/browser/NoopAnimationDriver\" class=\"code-anchor\">NoopAnimationDriver</a></code> instead.</td>\n</tr>\n</tbody>\n</table>\n\n  <div class=\"reviewed\">Last reviewed on Thu Oct 26 2023</div>\n</div>\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - /guide/releases#deprecation-policy\n - /guide/update-to-version-16\n - /guide/versions\n - api/animations/browser/AnimationDriver#NOOP\n - api/animations/browser/NoopAnimationDriver\n - api/common/NgFor\n - api/common/NgIf\n - api/common/NgOptimizedImage\n - api/common/NgSwitch\n - api/core/Component\n - api/core/ElementRef\n - api/core/NgProbeToken\n - api/core/ViewChild\n - api/core/afterNextRender\n - api/core/afterRender\n - api/platform-browser/REMOVE_STYLES_ON_COMPONENT_DESTROY\n - api/platform-browser/bootstrapApplication\n - api/router/Router\n - api/router/provideRouter\n - api/router/withViewTransitions\n - guide/update-to-version-17#angular-v17-requires-nodejs-version-v1813-or-newer\n - guide/update-to-version-17#angular-v17-requires-typescript-version-52-or-later\n - guide/update-to-version-17#angular-v17-requires-zonejs-v0140\n - guide/update-to-version-17#built-in-control-flow\n - guide/update-to-version-17#deferrable-views\n - guide/update-to-version-17#dependency-injection-debugging-in-devtools\n - guide/update-to-version-17#deprecations-highlights-in-angular-v17\n - guide/update-to-version-17#experimental-view-transitions-support\n - guide/update-to-version-17#feature-highlights-in-angular-v17\n - guide/update-to-version-17#highlighted-breaking-changes-in-angular-v17\n - guide/update-to-version-17#new-angularssr-package\n - guide/update-to-version-17#new-lifecycle-hooks\n - guide/update-to-version-17#onpush-dynamically-instantiated-components\n - guide/update-to-version-17#relocating-router-public-methods-to-providerouter-and-routermoduleforroot\n - guide/update-to-version-17#removal-of-malformedurierrorhandler\n - guide/update-to-version-17#removal-of-setuptestingrouter\n - guide/update-to-version-17#removal-of-zonejs-bundles\n - guide/update-to-version-17#remove_styles_on_component_destroy-now-defaults-to-true\n - guide/update-to-version-17#router-absolute-redirect-behavior-change\n - guide/update-to-version-17#routes-with-loadcomponent-data-inheritance\n - guide/update-to-version-17#strict-ngswitch-check\n - guide/update-to-version-17#update-angular-to-v17\n - guide/update-to-version-17#vite-and-esbuild-the-default-for-new-projects\n - https://blog.angular.io\n - https://github.com/angular/angular-cli/blob/main/CHANGELOG.md\n - https://github.com/angular/angular/blob/main/CHANGELOG.md\n - https://github.com/angular/components/blob/main/CHANGELOG.md\n - https://update.angular.io\n-->"
}