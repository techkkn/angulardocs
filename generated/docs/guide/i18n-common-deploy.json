{
  "id": "guide/i18n-common-deploy",
  "title": "Deploy multiple locales",
  "contents": "\n\n\n\n\n<div class=\"content\">\n  <h1 id=\"deploy-multiple-locales\">Deploy multiple locales<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#deploy-multiple-locales\"><i class=\"material-icons\">link</i></a></h1>\n<p>If <code>myapp</code> is the directory that contains the distributable files of your project, you typically make different versions available for different locales in locale directories.\nFor example, your French version is located in the <code>myapp/fr</code> directory and the Spanish version is located in the <code>myapp/es</code> directory.</p>\n<p>The HTML <code>base</code> tag with the <code>href</code> attribute specifies the base URI, or URL, for relative links.\nIf you set the <code>\"localize\"</code> option in <a href=\"guide/workspace-config\" title=\"Angular workspace configuration | Angular\"><code>angular.json</code></a> workspace build configuration file to <code>true</code> or to an array of locale IDs, the CLI adjusts the base <code>href</code> for each version of the application.\nTo adjust the base <code>href</code> for each version of the application, the CLI adds the locale to the configured <code>\"baseHref\"</code>.\nSpecify the <code>\"baseHref\"</code> for each locale in your <a href=\"guide/workspace-config\" title=\"Angular workspace configuration | Angular\"><code>angular.json</code></a> workspace build configuration file.\nThe following example displays <code>\"baseHref\"</code> set to an empty string.</p>\n<code-example header=\"angular.json\" path=\"i18n/angular.json\" region=\"i18n-baseHref\">\n  \"projects\": {\n    \"angular.io-example\": {\n      // ...\n      \"i18n\": {\n        \"sourceLocale\": \"en-US\",\n        \"locales\": {\n          \"fr\": {\n            \"translation\": \"src/locale/messages.fr.xlf\",\n            \"baseHref\": \"\"\n          }\n        }\n      },\n      \"architect\": {\n        // ...\n      }\n    }\n  }\n  // ...\n}\n\n</code-example>\n<p>Also, to declare the base <code>href</code> at compile time, use the CLI <code>--baseHref</code> option with <a href=\"cli/build\" title=\"ng build | CLI | Angular\"><code>ng build</code></a>.</p>\n<h2 id=\"configure-a-server\">Configure a server<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#configure-a-server\"><i class=\"material-icons\">link</i></a></h2>\n<p>Typical deployment of multiple languages serve each language from a different subdirectory.\nUsers are redirected to the preferred language defined in the browser using the <code>Accept-Language</code> HTTP header.\nIf the user has not defined a preferred language, or if the preferred language is not available, then the server falls back to the default language.\nTo change the language, change your current location to another subdirectory.\nThe change of subdirectory often occurs using a menu implemented in the application.</p>\n<div class=\"alert is-helpful\">\n<p>For more information on how to deploy apps to a remote server, see <a href=\"guide/deployment\" title=\"Deployment | Angular\">Deployment</a>.</p>\n</div>\n<h3 id=\"nginx-example\">Nginx example<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#nginx-example\"><i class=\"material-icons\">link</i></a></h3>\n<p>The following example displays an Nginx configuration.</p>\n<code-example path=\"i18n/doc-files/nginx.conf\" language=\"nginx\">\n<a href=\"api/common/http\" class=\"code-anchor\">http</a> {\n    # Browser preferred language detection (does NOT require\n    # AcceptLanguageModule)\n    map $http_accept_language $accept_language {\n        ~*^de de;\n        ~*^fr fr;\n        ~*^en en;\n    }\n    # ...\n}\n\nserver {\n    listen 80;\n    server_name localhost;\n    root /www/data;\n\n    # Fallback to default language if no preference defined by <a href=\"api/animations/browser\" class=\"code-anchor\">browser</a>\n    if ($accept_language ~ \"^$\") {\n        set $accept_language \"fr\";\n    }\n\n    # Redirect \"/\" to Angular application in the preferred language of the <a href=\"api/animations/browser\" class=\"code-anchor\">browser</a>\n    rewrite ^/$ /$accept_language permanent;\n\n    # Everything under the Angular application is always redirected to Angular in the\n    # correct language\n    location ~ ^/(fr|de|en) {\n        try_files $uri /$1/index.html?$args;\n    }\n    # ...\n}\n\n\n</code-example>\n<h3 id=\"apache-example\">Apache example<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/i18n-common-deploy#apache-example\"><i class=\"material-icons\">link</i></a></h3>\n<p>The following example displays an Apache configuration.</p>\n<code-example path=\"i18n/doc-files/apache2.conf\" language=\"apache\">\n&#x3C;VirtualHost *:80>\n    ServerName localhost\n    DocumentRoot /www/data\n    &#x3C;Directory \"/www/data\">\n        RewriteEngine on\n        RewriteBase /\n        RewriteRule ^../index\\.html$ - [L]\n\n        RewriteCond %{REQUEST_FILENAME} !-f\n        RewriteCond %{REQUEST_FILENAME} !-d\n        RewriteRule (..) $1/index.html [L]\n\n        RewriteCond %{HTTP:Accept-Language} ^de [NC]\n        RewriteRule ^$ /de/ [R]\n\n        RewriteCond %{HTTP:Accept-Language} ^en [NC]\n        RewriteRule ^$ /en/ [R]\n\n        RewriteCond %{HTTP:Accept-Language} !^en [NC]\n        RewriteCond %{HTTP:Accept-Language} !^de [NC]\n        RewriteRule ^$ /fr/ [R]\n    &#x3C;/Directory>\n&#x3C;/VirtualHost>\n\n\n</code-example>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">Last reviewed on Mon Feb 28 2022</div>\n</div>\n\n<!-- links to this doc:\n - guide/i18n-common-merge\n - guide/i18n-common-overview\n-->\n<!-- links from this doc:\n - api/animations/browser\n - api/common/http\n - cli/build\n - guide/deployment\n - guide/i18n-common-deploy#apache-example\n - guide/i18n-common-deploy#configure-a-server\n - guide/i18n-common-deploy#deploy-multiple-locales\n - guide/i18n-common-deploy#nginx-example\n - guide/workspace-config\n-->"
}