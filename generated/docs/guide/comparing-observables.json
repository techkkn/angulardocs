{
  "id": "guide/comparing-observables",
  "title": "Observables compared to other techniques",
  "contents": "\n\n\n\n\n<div class=\"content\">\n  <h1 id=\"observables-compared-to-other-techniques\">Observables compared to other techniques<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/comparing-observables#observables-compared-to-other-techniques\"><i class=\"material-icons\">link</i></a></h1>\n<p>You can often use observables instead of promises to deliver values asynchronously.\nSimilarly, observables can take the place of event handlers.\nFinally, because observables deliver multiple values, you can use them where you might otherwise build and operate on arrays.</p>\n<p>Observables behave somewhat differently from the alternative techniques in each of these situations, but offer some significant advantages.\nHere are detailed comparisons of the differences.</p>\n<h2 id=\"observables-compared-to-promises\">Observables compared to promises<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/comparing-observables#observables-compared-to-promises\"><i class=\"material-icons\">link</i></a></h2>\n<p>Observables are often compared to promises.\nHere are some key differences:</p>\n<ul>\n<li>\n<p>Observable execution is deferred; computation does not start until subscription.\nPromises execute immediately on creation.\nThis makes observables useful for defining recipes that can be run whenever you need the result.</p>\n</li>\n<li>\n<p>Observables provide many values.\nPromises provide one.\nThis makes observables useful for getting multiple values over time.</p>\n</li>\n<li>\n<p>Observable values can be transformed with operators as well as in the subscription.  The rich variety of RxJS operators observables enables complex transformations that can be passed around to other parts of the system, without causing the work to be executed prematurely.</p>\n<p>Promises have <code>.then()</code> clauses which can transform values but only after the work is done.</p>\n</li>\n<li>\n<p>Observables and Promises handle errors differently with roughly comparable efficacy.</p>\n</li>\n</ul>\n<p>The following sections explore these points in greater detail.</p>\n<h3 id=\"creation-and-subscription\">Creation and subscription<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/comparing-observables#creation-and-subscription\"><i class=\"material-icons\">link</i></a></h3>\n<ul>\n<li>\n<p>Observables are not executed until a consumer subscribes.</p>\n<p>The <code>subscribe()</code> initiates the observable's behavior which may execute synchronously or asynchronously and could produce one, many or no values over time.</p>\n<p>For \"unicast\" observables, if you call <code>subscribe</code> again, you get a new observable execution with its own production of values.\nCalling <code>subscribe</code> on a \"multicast\" observable (e.g., <code>Subject</code> or an observable with the <code>shareReplay</code> operator) simply adds another <em>subscriber</em> to the already running observable.</p>\n<p>The <code>subscribe</code> call is the end-of-the-line. You cannot continue to manipulate values after <code>subscribe(...)</code>.</p>\n<code-example header=\"src/observables.ts (observable)\" path=\"comparing-observables/src/observables.ts\" region=\"observable\">\n\n// declare a publishing operation\nconst observable = new Observable&#x3C;number>(observer => {\n  // Subscriber fn...\n});\n\n// initiate execution\nobservable.subscribe(value => {\n  // observer handles notifications\n});\n\n\n</code-example>\n</li>\n<li>\n<p>Promises execute immediately when they are created. There is no deferred execution and, therefore, no equivalent to <code>subscribe()</code>.</p>\n<p>A promise is always asynchronous and can produce at most one value.</p>\n<p>There is no way to restart a promise and it retains its result value for the life of the promise.</p>\n<p>You can chain additional <code>then</code> clauses to a promise.</p>\n<code-example header=\"src/promises.ts (promise)\" path=\"comparing-observables/src/promises.ts\" region=\"promise\">\n// initiate execution\nlet promise = new Promise&#x3C;number>(resolve => {\n  // Executer fn...\n});\npromise.then(value => {\n  // handle result here\n});\n\n</code-example>\n</li>\n</ul>\n<p><a id=\"chaining\"></a></p>\n<h3 id=\"transformations\">Transformations<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/comparing-observables#transformations\"><i class=\"material-icons\">link</i></a></h3>\n<ul>\n<li>\n<p>Developers can transform values both in the <em>subscription</em> and in piped <em>operators</em>. There are large number of RxJS operators to suit many complex scenarios, including numerous ways to combine and split observables.</p>\n<code-example header=\"src/observables.ts (operators and multiple values)\" path=\"comparing-observables/src/observables.ts\" region=\"operators\">\n/** Emit 0, 2, 4 every 10ms */\nconst observable1$ = interval(10).pipe(\n  map(value  => 2 * value), // double the interval values: 0, 1, 2, ...\n  take(3) // take only the first 3 emitted values\n);\n\n/** Emit 'Ta Da!' after 10ms */\nconst observable2$ = of('Ta Da!').pipe(delay(10));\n\n/** Observable processes all of observable1 first, then all of observable2.\n * Emits 0, 2, 4, 'Ta Da! after about 40ms' */\nconst combined$ = concat(observable1$, observable2$);\n\n</code-example>\n</li>\n<li>\n<p>Promises do not have an equivalent to <code>subscribe()</code>. You can transform the emitted value of a promise through one or more <code>.then</code> clauses. Promises have a small set of combiners (e.g., <code>all</code>, <code>any</code>, <code>race</code>).</p>\n<code-example header=\"src/promises.ts (chained .then)\" path=\"comparing-observables/src/promises.ts\" region=\"chain\">\npromise\n  .then(value => 2 * value)\n  .then(value => -value);\n\n</code-example>\n</li>\n</ul>\n<h3 id=\"cancellation\">Cancellation<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/comparing-observables#cancellation\"><i class=\"material-icons\">link</i></a></h3>\n<ul>\n<li>\n<p>Observable subscriptions are cancellable.\nUnsubscribing removes the listener from receiving further values, and notifies the subscriber function to cancel work.</p>\n<code-example header=\"src/observables.ts (unsubscribe)\" path=\"comparing-observables/src/observables.ts\" region=\"unsubscribe\">\n\nconst subscription = observable.subscribe(() => {\n  // observer handles notifications\n});\n\nsubscription.unsubscribe();\n\n\n</code-example>\n</li>\n<li>\n<p>Promises are not cancellable.</p>\n</li>\n</ul>\n<h3 id=\"error-handling\">Error handling<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/comparing-observables#error-handling\"><i class=\"material-icons\">link</i></a></h3>\n<ul>\n<li>\n<p>Observable execution errors can be handled with the <code>catchError()</code> operator or in the <code>subscribe</code>.</p>\n<p><code>catchError</code> can put the observable back on the normal path where it continues to produce values or it can rethrow the error. An uncaught error unsubscribes all subscribers.</p>\n<code-example header=\"src/observables.ts (error)\" path=\"comparing-observables/src/observables.ts\" region=\"error\">\nconst observable = new Observable&#x3C;number>(() => {\n  throw new Error('my error');\n});\n\nobservable.pipe(\n  catchError(error => of(42)), // recover within the operator\n  map(() => { throw new Error('another error'); }), // oops\n  catchError(error => { throw new Error('revised error'); }) // modify and rethrow\n).subscribe({\n  error: err => console.error(err) // report error in subscribe\n});\n\n</code-example>\n</li>\n<li>\n<p>Promise errors can be handled with a <code>.catch()</code> or in the second argument of a <code>.then()</code>.</p>\n<code-example header=\"src/promises.ts (error)\" path=\"comparing-observables/src/promises.ts\" region=\"error\">\nconst promise = Promise.reject('my error') // promise that errors\n  .catch(error => 42) // recover from error\n  .then(() => { throw new Error('another error'); }) // oops\n  .then(null, error => { throw new Error('revised error'); }) // modify and rethrow\n  .catch(error => {\n    console.error(error.toString()); // report error ...\n    throw error; // and rethrow so promise remains \"rejected\"\n  });\n\n\n</code-example>\n</li>\n</ul>\n<h3 id=\"cheat-sheet\">Cheat sheet<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/comparing-observables#cheat-sheet\"><i class=\"material-icons\">link</i></a></h3>\n<p>The following code snippets illustrate how the same kind of operation is defined using observables and promises.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Operation</th>\n<th align=\"left\">Observable</th>\n<th align=\"left\">Promise</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">Creation</td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> new Observable((observer) => { \n  observer.next(123); \n}); </code-example></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> new Promise((resolve, reject) => { \n  resolve(123); \n}); </code-example></td>\n</tr>\n<tr>\n<td align=\"left\">Transform</td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> obs.pipe(map((value) => value * 2));</code-example></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> promise.then((value) => value * 2);</code-example></td>\n</tr>\n<tr>\n<td align=\"left\">Subscribe</td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> sub = obs.subscribe((value) => { \n  console.log(value) \n});</code-example></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> promise.then((value) => { \n  console.log(value); \n}); </code-example></td>\n</tr>\n<tr>\n<td align=\"left\">Unsubscribe</td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> sub.unsubscribe();</code-example></td>\n<td align=\"left\">Implied by promise resolution.</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"observables-compared-to-events-api\">Observables compared to events API<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/comparing-observables#observables-compared-to-events-api\"><i class=\"material-icons\">link</i></a></h2>\n<p>Observables are very similar to event handlers that use the events API.\nBoth techniques define notification handlers, and use them to process multiple values delivered over time.\nSubscribing to an observable is equivalent to adding an event listener.\nOne significant difference is that you can configure an observable to transform an event before passing the event to the handler.</p>\n<p>Using observables to handle events and asynchronous operations can have the advantage of greater consistency in contexts such as HTTP requests.</p>\n<p>Here are some code samples that illustrate how the same kind of operation is defined using observables and the events API.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\">Observable</th>\n<th align=\"left\">Events API</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">Creation &#x26; cancellation</td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> // Setup \nconst clicks$ = fromEvent(buttonEl, 'click'); \n// Begin listening \nconst subscription = clicks$ \n  .subscribe(e => console.log('Clicked', e)) \n// Stop listening \nsubscription.unsubscribe(); </code-example></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\">function handler(e) { \n  console.log('Clicked', e); \n} \n// Setup &#x26; begin listening \nbutton.addEventListener('click', handler); \n// Stop listening \nbutton.removeEventListener('click', handler); </code-example></td>\n</tr>\n<tr>\n<td align=\"left\">Subscription</td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\">observable.subscribe(() => { \n  // notification handlers here \n});</code-example></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\">element.addEventListener(eventName, (event) => { \n  // notification handler here \n}); </code-example></td>\n</tr>\n<tr>\n<td align=\"left\">Configuration</td>\n<td align=\"left\">Listen for keystrokes, but provide a stream representing the value in the input. <code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> fromEvent(inputEl, 'keydown').pipe( \n  map(e => e.target.value) \n); </code-example></td>\n<td align=\"left\">Does not support configuration. <code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> element.addEventListener(eventName, (event) => { \n  // Cannot change the passed <a href=\"api/router/Event\" class=\"code-anchor\">Event</a> into another \n  // value before it gets to the handler \n}); </code-example></td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"observables-compared-to-arrays\">Observables compared to arrays<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/comparing-observables#observables-compared-to-arrays\"><i class=\"material-icons\">link</i></a></h2>\n<p>An observable produces values over time.\nAn array is created as a static set of values.\nIn a sense, observables are asynchronous where arrays are synchronous.\nIn the following examples, <code>→</code> implies asynchronous value delivery.</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Values</th>\n<th align=\"left\">Observable</th>\n<th align=\"left\">Array</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">Given</td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> obs: →1→2→3→5→7 </code-example> <code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> obsB: →'a'→'b'→'c' </code-example></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> arr: [1, 2, 3, 5, 7] </code-example> <code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> arrB: ['a', 'b', 'c'] </code-example></td>\n</tr>\n<tr>\n<td align=\"left\"><code>concat()</code></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> concat(obs, obsB) </code-example> <code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> →1→2→3→5→7→'a'→'b'→'c' </code-example></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> arr.concat(arrB) </code-example> <code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> [1,2,3,5,7,'a','b','c'] </code-example></td>\n</tr>\n<tr>\n<td align=\"left\"><code>filter()</code></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> obs.pipe(filter((v) => v>3)) </code-example> <code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> →5→7 </code-example></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> arr.filter((v) => v>3) </code-example> <code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> [5, 7] </code-example></td>\n</tr>\n<tr>\n<td align=\"left\"><code>find()</code></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> obs.pipe(find((v) => v>3)) </code-example> <code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> →5 </code-example></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> arr.find((v) => v>3) </code-example> <code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> 5 </code-example></td>\n</tr>\n<tr>\n<td align=\"left\"><code>findIndex()</code></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> obs.pipe(findIndex((v) => v>3)) </code-example> <code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> →3 </code-example></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> arr.findIndex((v) => v>3) </code-example> <code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> 3 </code-example></td>\n</tr>\n<tr>\n<td align=\"left\"><code>forEach()</code></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> obs.pipe(tap((v) => { \n   console.log(v); \n })) \n 1 \n 2 \n 3 \n 5 \n 7 </code-example></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> arr.forEach((v) => { \n   console.log(v); \n }) \n 1 \n 2 \n 3 \n 5 \n 7 </code-example></td>\n</tr>\n<tr>\n<td align=\"left\"><code>map()</code></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> obs.pipe(map((v) => -v)) </code-example> <code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> →-1→-2→-3→-5→-7 </code-example></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> arr.map((v) => -v) </code-example> <code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> [-1, -2, -3, -5, -7] </code-example></td>\n</tr>\n<tr>\n<td align=\"left\"><code>reduce()</code></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> obs.pipe(reduce((s,v)=> s+v, 0)) </code-example> <code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> →18 </code-example></td>\n<td align=\"left\"><code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> arr.reduce((s,v) => s+v, 0) </code-example> <code-example format=\"typescript\" hidecopy=\"\" language=\"typescript\"> 18 </code-example></td>\n</tr>\n</tbody>\n</table>\n<!-- links -->\n<!-- external links -->\n<!-- end links -->\n\n  <div class=\"reviewed\">Last reviewed on Fri Aug 25 2023</div>\n</div>\n\n<!-- links to this doc:\n-->\n<!-- links from this doc:\n - api/router/Event\n - guide/comparing-observables#cancellation\n - guide/comparing-observables#cheat-sheet\n - guide/comparing-observables#creation-and-subscription\n - guide/comparing-observables#error-handling\n - guide/comparing-observables#observables-compared-to-arrays\n - guide/comparing-observables#observables-compared-to-events-api\n - guide/comparing-observables#observables-compared-to-other-techniques\n - guide/comparing-observables#observables-compared-to-promises\n - guide/comparing-observables#transformations\n-->"
}