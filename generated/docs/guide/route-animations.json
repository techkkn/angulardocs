{
  "id": "guide/route-animations",
  "title": "Route transition animations",
  "contents": "\n\n\n\n\n<div class=\"content\">\n  <h1 id=\"route-transition-animations\">Route transition animations<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/route-animations#route-transition-animations\"><i class=\"material-icons\">link</i></a></h1>\n<p>Routing enables users to navigate between different routes in an application.</p>\n<h2 id=\"prerequisites\">Prerequisites<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/route-animations#prerequisites\"><i class=\"material-icons\">link</i></a></h2>\n<p>A basic understanding of the following concepts:</p>\n<ul>\n<li><a href=\"guide/animations\">Introduction to Angular animations</a></li>\n<li><a href=\"guide/transition-and-triggers\">Transition and triggers</a></li>\n<li><a href=\"guide/reusable-animations\">Reusable animations</a></li>\n</ul>\n<h2 id=\"enable-routing-transition-animation\">Enable routing transition animation<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/route-animations#enable-routing-transition-animation\"><i class=\"material-icons\">link</i></a></h2>\n<p>When a user navigates from one route to another, the Angular router maps the URL path to a relevant component and displays its view.\nAnimating this route transition can greatly enhance the user experience.</p>\n<p>The Angular router comes with high-level animation functions that let you animate the transitions between views when a route changes.\nTo produce an animation sequence when switching between routes, you need to define nested animation sequences.\nStart with the top-level component that hosts the view, and nest animations in the components that host the embedded views.</p>\n<p>To enable routing transition animation, do the following:</p>\n<ol>\n<li>Create a routing configuration that defines the possible routes. For NgModule based applications, this will include creating a <code><a href=\"api/router/RouterModule\" class=\"code-anchor\">RouterModule</a></code> and adding it to the main <code>AppModule</code>.</li>\n<li>Add a router outlet to tell the Angular router where to place the activated components in the DOM.</li>\n<li>Define the animation.</li>\n</ol>\n<p>Illustrate a router transition animation by navigating between two routes, <em>Home</em> and <em>About</em> associated with the <code>HomeComponent</code> and <code>AboutComponent</code> views respectively.\nBoth of these component views are children of the top-most view, hosted by <code>AppComponent</code>.\nImplement a router transition animation that slides in the new view to the right and slides out the old view when navigating between the two routes.</p>\n<div class=\"lightbox\">\n<img alt=\"Animations in action\" width=\"440\" src=\"generated/images/guide/animations/route-animation.gif\">\n</div>\n<h2 id=\"route-configuration\">Route configuration<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/route-animations#route-configuration\"><i class=\"material-icons\">link</i></a></h2>\n<p>To begin, configure a set of routes. This route configuration tells the router how to navigate.</p>\n<ul>\n<li>Create an array called <code>routes</code> in <code>app.routes.ts</code> to define a set of routes. </li>\n<li>Add the routes to the <code><a href=\"api/router/provideRouter\" class=\"code-anchor\">provideRouter</a></code> function in the providers array in <code>app.config.ts</code>.</li>\n</ul>\n<code-example language=\"ts\">\nexport const appConfig: <a href=\"api/core/ApplicationConfig\" class=\"code-anchor\">ApplicationConfig</a> = {\n  providers: [\n    <a href=\"api/router/provideRouter\" class=\"code-anchor\">provideRouter</a>(routes)\n  ]\n};\n</code-example>\n<div class=\"alert is-helpful\">\n<p><strong>NOTE</strong>: <br>\nFor <code><a href=\"api/core/NgModule\" class=\"code-anchor\">NgModule</a></code> based applications:</p>\n<p>Use the <code>RouterModule.forRoot</code> method to define a set of routes.\nAlso, add <code><a href=\"api/router/RouterModule\" class=\"code-anchor\">RouterModule</a></code> to the <code>imports</code> array of the main module, <code>AppModule</code>.</p>\n<p>Use the <code>RouterModule.forRoot</code> method in the root module, <code>AppModule</code>, to register top-level application routes and providers.\nFor feature modules, call the <code>RouterModule.forChild</code> method instead.</p>\n</div>\n<p>The following configuration defines the possible routes for the application.</p>\n<code-example header=\"src/app/app.routes.ts\" path=\"animations/src/app/app.routes.ts\" region=\"route-animation-data\">\nexport const routes: <a href=\"api/router/Routes\" class=\"code-anchor\">Routes</a> = [\n    { path: '', pathMatch: 'full', redirectTo: '/enter-leave' },\n    {\n        path: 'open-close',\n        component: OpenClosePageComponent,\n        data: { <a href=\"api/animations/animation\" class=\"code-anchor\">animation</a>: 'openClosePage' }\n    },\n    {\n        path: 'status',\n        component: StatusSliderPageComponent,\n        data: { <a href=\"api/animations/animation\" class=\"code-anchor\">animation</a>: 'statusPage' }\n    },\n    {\n        path: 'toggle',\n        component: ToggleAnimationsPageComponent,\n        data: { <a href=\"api/animations/animation\" class=\"code-anchor\">animation</a>: 'togglePage' }\n    },\n    {\n        path: 'heroes',\n        component: HeroListPageComponent,\n        data: { <a href=\"api/animations/animation\" class=\"code-anchor\">animation</a>: 'filterPage' }\n    },\n    {\n        path: 'hero-groups',\n        component: HeroListGroupPageComponent,\n        data: { <a href=\"api/animations/animation\" class=\"code-anchor\">animation</a>: 'heroGroupPage' }\n    },\n    {\n        path: 'enter-leave',\n        component: HeroListEnterLeavePageComponent,\n        data: { <a href=\"api/animations/animation\" class=\"code-anchor\">animation</a>: 'enterLeavePage' }\n    },\n    {\n        path: 'auto',\n        component: HeroListAutoCalcPageComponent,\n        data: { <a href=\"api/animations/animation\" class=\"code-anchor\">animation</a>: 'autoPage' }\n    },\n    {\n        path: 'insert-remove',\n        component: InsertRemoveComponent,\n        data: { <a href=\"api/animations/animation\" class=\"code-anchor\">animation</a>: 'insertRemovePage' }\n    },\n    {\n        path: 'querying',\n        component: QueryingComponent,\n        data: { <a href=\"api/animations/animation\" class=\"code-anchor\">animation</a>: 'queryingPage' }\n    },\n    {\n        path: 'home',\n        component: HomeComponent,\n        data: { <a href=\"api/animations/animation\" class=\"code-anchor\">animation</a>: 'HomePage' }\n    },\n    {\n        path: 'about',\n        component: AboutComponent,\n        data: { <a href=\"api/animations/animation\" class=\"code-anchor\">animation</a>: 'AboutPage' }\n    },\n];\n\n</code-example>\n<p>The <code>home</code> and <code>about</code> paths are associated with the <code>HomeComponent</code> and <code>AboutComponent</code> views.\nThe route configuration tells the Angular router to instantiate the <code>HomeComponent</code> and <code>AboutComponent</code> views when the navigation matches the corresponding path.</p>\n<p>The <code>data</code> property of each route defines the key animation-specific configuration associated with a route.\nThe <code>data</code> property value is passed into <code>AppComponent</code> when the route changes.</p>\n<div class=\"alert is-helpful\">\n<p><strong>NOTE</strong>: <br>\nThe <code>data</code> property names that you use can be arbitrary.\nFor example, the name <em>animation</em> used in the preceding example is an arbitrary choice.</p>\n</div>\n<h2 id=\"router-outlet\">Router outlet<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/route-animations#router-outlet\"><i class=\"material-icons\">link</i></a></h2>\n<p>After configuring the routes, add a <code>&#x3C;<a href=\"api/router/RouterOutlet\" class=\"code-anchor\">router-outlet</a>></code> inside the root <code>AppComponent</code> template.\nThe <code>&#x3C;<a href=\"api/router/RouterOutlet\" class=\"code-anchor\">router-outlet</a>></code> directive tells the Angular router where to render the views when matched with a route.</p>\n<p>The <code><a href=\"api/router/ChildrenOutletContexts\" class=\"code-anchor\">ChildrenOutletContexts</a></code> holds information about outlets and activated routes.\nThe <code>data</code> property of each <code><a href=\"api/router/Route\" class=\"code-anchor\">Route</a></code> can be used to animate routing transitions.</p>\n<code-example header=\"src/app/app.component.html\" path=\"animations/src/app/app.component.html\" region=\"route-animations-outlet\">\n&#x3C;div [@routeAnimations]=\"getRouteAnimationData()\">\n  &#x3C;<a href=\"api/router/RouterOutlet\" class=\"code-anchor\">router-outlet</a>>&#x3C;/<a href=\"api/router/RouterOutlet\" class=\"code-anchor\">router-outlet</a>>\n&#x3C;/div>\n\n</code-example>\n<p><code>AppComponent</code> defines a method that can detect when a view changes.\nThe method assigns an animation state value to the animation trigger (<code>@routeAnimation</code>) based on the route configuration <code>data</code> property value.\nHere's an example of an <code>AppComponent</code> method that detects when a route change happens.</p>\n<code-example header=\"src/app/app.component.ts\" path=\"animations/src/app/app.component.ts\" region=\"get-route-animations-data\">\nconstructor(private contexts: <a href=\"api/router/ChildrenOutletContexts\" class=\"code-anchor\">ChildrenOutletContexts</a>) {}\n\ngetRouteAnimationData() {\n  return this.contexts.getContext('primary')?.route?.snapshot?.data?.['<a href=\"api/animations/animation\" class=\"code-anchor\">animation</a>'];\n}\n\n</code-example>\n<p>The <code>getRouteAnimationData()</code> method takes the value of the outlet. It returns a string that represents the state of the animation based on the custom data of the current active route.\nUse this data to control which transition to run for each route.</p>\n<h2 id=\"animation-definition\">Animation definition<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/route-animations#animation-definition\"><i class=\"material-icons\">link</i></a></h2>\n<p>Animations can be defined directly inside your components.\nFor this example you are defining the animations in a separate file, which allows re-use of animations.</p>\n<p>The following code snippet defines a reusable animation named <code>slideInAnimation</code>.</p>\n<code-example header=\"src/app/animations.ts\" path=\"animations/src/app/animations.ts\" region=\"route-animations\">\nexport const slideInAnimation =\n  <a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('routeAnimations', [\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('HomePage &#x3C;=> AboutPage', [\n      <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ position: 'relative' }),\n      <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':enter, :leave', [\n        <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%'\n        })\n      ]),\n      <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':enter', [\n        <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ left: '-100%' })\n      ], { optional: true }),\n      <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':leave', <a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>(), { optional: true }),\n      group([\n        <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':leave', [\n          <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('300ms ease-out', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ left: '100%' }))\n        ], { optional: true }),\n        <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':enter', [\n          <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('300ms ease-out', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ left: '0%' }))\n        ], { optional: true }),\n      ]),\n    ]),\n    <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('* &#x3C;=> *', [\n      <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ position: 'relative' }),\n      <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':enter, :leave', [\n        <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: '100%'\n        })\n      ], { optional: true }),\n      <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':enter', [\n        <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ left: '-100%' })\n      ], { optional: true }),\n      <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':leave', <a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>(), { optional: true }),\n      group([\n        <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':leave', [\n          <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('200ms ease-out', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ left: '100%', opacity: 0 }))\n        ], { optional: true }),\n        <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':enter', [\n          <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('300ms ease-out', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ left: '0%' }))\n        ], { optional: true }),\n        <a href=\"api/animations/query\" class=\"code-anchor\">query</a>('@*', <a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>(), { optional: true })\n      ]),\n    ])\n  ]);\n\n</code-example>\n<p>The animation definition performs the following tasks:</p>\n<ul>\n<li>Defines two transitions (a single <code><a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a></code> can define multiple states and transitions)</li>\n<li>Adjusts the styles of the host and child views to control their relative positions during the transition</li>\n<li>Uses <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> to determine which child view is entering and which is leaving the host view</li>\n</ul>\n<p>A route change activates the animation trigger, and a transition matching the state change is applied.</p>\n<div class=\"alert is-helpful\">\n<p><strong>NOTE</strong>: <br>\nThe transition states must match the <code>data</code> property value defined in the route configuration.</p>\n</div>\n<p>Make the animation definition available in your application by adding the reusable animation (<code>slideInAnimation</code>) to the <code>animations</code> metadata of the <code>AppComponent</code>.</p>\n<code-example header=\"src/app/app.component.ts\" path=\"animations/src/app/app.component.ts\" region=\"define\">\n@<a href=\"api/core/Component\" class=\"code-anchor\">Component</a>({\n  standalone: true,\n  selector: 'app-root',\n  templateUrl: 'app.component.html',\n  styleUrls: ['app.component.css'],\n  imports: [<a href=\"api/router/RouterLink\" class=\"code-anchor\">RouterLink</a>, <a href=\"api/router/RouterOutlet\" class=\"code-anchor\">RouterOutlet</a>],\n  animations: [\n    slideInAnimation\n  ]\n})\n\n</code-example>\n<h3 id=\"style-the-host-and-child-components\">Style the host and child components<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/route-animations#style-the-host-and-child-components\"><i class=\"material-icons\">link</i></a></h3>\n<p>During a transition, a new view is inserted directly after the old one and both elements appear on screen at the same time.\nTo prevent this behavior, update the host view to use relative positioning.\nThen, update the removed and inserted child views to use absolute positioning.\nAdding these styles to the views animates the containers in place and prevents one view from affecting the position of the other on the page.</p>\n<code-example header=\"src/app/animations.ts (excerpt)\" path=\"animations/src/app/animations.ts\" region=\"style-view\">\n<a href=\"api/animations/trigger\" class=\"code-anchor\">trigger</a>('routeAnimations', [\n  <a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('HomePage &#x3C;=> AboutPage', [\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ position: 'relative' }),\n    <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':enter, :leave', [\n      <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: '100%'\n      })\n    ]),\n\n</code-example>\n<h3 id=\"query-the-view-containers\">Query the view containers<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/route-animations#query-the-view-containers\"><i class=\"material-icons\">link</i></a></h3>\n<p>Use the <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>()</code> method to find and animate elements within the current host component.\nThe <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>(\":enter\")</code> statement returns the view that is being inserted, and <code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>(\":leave\")</code> returns the view that is being removed.</p>\n<p>Assume that you are routing from the <em>Home => About</em>.</p>\n<code-example header=\"src/app/animations.ts (excerpt)\" path=\"animations/src/app/animations.ts\" region=\"query\">\n  <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':enter', [\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ left: '-100%' })\n  ], { optional: true }),\n  <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':leave', <a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>(), { optional: true }),\n  group([\n    <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':leave', [\n      <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('300ms ease-out', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ left: '100%' }))\n    ], { optional: true }),\n    <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':enter', [\n      <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('300ms ease-out', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ left: '0%' }))\n    ], { optional: true }),\n  ]),\n]),\n<a href=\"api/animations/transition\" class=\"code-anchor\">transition</a>('* &#x3C;=> *', [\n  <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ position: 'relative' }),\n  <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':enter, :leave', [\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      width: '100%'\n    })\n  ], { optional: true }),\n  <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':enter', [\n    <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ left: '-100%' })\n  ], { optional: true }),\n  <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':leave', <a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>(), { optional: true }),\n  group([\n    <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':leave', [\n      <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('200ms ease-out', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ left: '100%', opacity: 0 }))\n    ], { optional: true }),\n    <a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':enter', [\n      <a href=\"api/animations/animate\" class=\"code-anchor\">animate</a>('300ms ease-out', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ left: '0%' }))\n    ], { optional: true }),\n    <a href=\"api/animations/query\" class=\"code-anchor\">query</a>('@*', <a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>(), { optional: true })\n  ]),\n])\n\n</code-example>\n<p>The animation code does the following after styling the views:</p>\n<ol>\n<li>\n<p><code><a href=\"api/animations/query\" class=\"code-anchor\">query</a>(':enter', <a href=\"api/animations/style\" class=\"code-anchor\">style</a>({ left: '-100%' }))</code> matches the view that is added and hides the newly added view by positioning it to the far left.</p>\n</li>\n<li>\n<p>Calls <code><a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>()</code> on the view that is leaving, to run its child animations.</p>\n</li>\n<li>\n<p>Uses <a href=\"api/animations/group\"><code>group()</code></a> function to make the inner animations run in parallel.</p>\n</li>\n<li>\n<p>Within the <a href=\"api/animations/group\"><code>group()</code></a> function:</p>\n<ol>\n<li>\n<p>Queries the view that is removed and animates it to slide far to the right.</p>\n</li>\n<li>\n<p>Slides in the new view by animating the view with an easing function and duration.</p>\n<p>This animation results in the <code>about</code> view sliding in from the left.</p>\n</li>\n</ol>\n</li>\n<li>\n<p>Calls the <code><a href=\"api/animations/animateChild\" class=\"code-anchor\">animateChild</a>()</code> method on the new view to run its child animations after the main animation completes.</p>\n</li>\n</ol>\n<p>You now have a basic routable animation that animates routing from one view to another.</p>\n<h2 id=\"more-on-angular-animations\">More on Angular animations<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/route-animations#more-on-angular-animations\"><i class=\"material-icons\">link</i></a></h2>\n<p>You might also be interested in the following:</p>\n<ul>\n<li><a href=\"guide/animations\">Introduction to Angular animations</a></li>\n<li><a href=\"guide/transition-and-triggers\">Transition and triggers</a></li>\n<li><a href=\"guide/complex-animation-sequences\">Complex animation sequences</a></li>\n<li><a href=\"guide/reusable-animations\">Reusable animations</a></li>\n</ul>\n\n  <div class=\"reviewed\">Last reviewed on Tue Oct 11 2022</div>\n</div>\n\n<!-- links to this doc:\n - guide/animations\n - guide/complex-animation-sequences\n - guide/reusable-animations\n - guide/transition-and-triggers\n-->\n<!-- links from this doc:\n - api/animations/animate\n - api/animations/animateChild\n - api/animations/animation\n - api/animations/group\n - api/animations/query\n - api/animations/style\n - api/animations/transition\n - api/animations/trigger\n - api/core/ApplicationConfig\n - api/core/Component\n - api/core/NgModule\n - api/router/ChildrenOutletContexts\n - api/router/Route\n - api/router/RouterLink\n - api/router/RouterModule\n - api/router/RouterOutlet\n - api/router/Routes\n - api/router/provideRouter\n - guide/animations\n - guide/complex-animation-sequences\n - guide/reusable-animations\n - guide/route-animations#animation-definition\n - guide/route-animations#enable-routing-transition-animation\n - guide/route-animations#more-on-angular-animations\n - guide/route-animations#prerequisites\n - guide/route-animations#query-the-view-containers\n - guide/route-animations#route-configuration\n - guide/route-animations#route-transition-animations\n - guide/route-animations#router-outlet\n - guide/route-animations#style-the-host-and-child-components\n - guide/transition-and-triggers\n-->"
}